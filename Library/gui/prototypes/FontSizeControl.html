<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height">
        <script type="text/javascript" src="../../../BibleAppNW/js/TweenMax.js"></script>
        <script type="text/javascript" src="../../../BibleAppNW/js/Draggable.js"></script>
        <title>The Bible</title>
    </head>
    <body onload='startDraggable(12, 12, 48)'>
	    <div id="settingRoot">
			<div id="fontSizeControl">
				<div id="slider"></div>
				<div id="thumb"></div>
			</div>
			<div id="sampleText" style='fontSize:12'>
				For God so loved the world, that he gave his only begotten Son, that whoever believes in Him will not perish, but have eternal life.
			</div>
	    </div>
    </body>
    <script type="text/javascript">
	    function startDraggable(fontSize, ptMin, ptMax) {
		    var sampleNode = document.getElementById('sampleText');
		    var ptRange = ptMax - ptMin;
		    var startPos = initialPosition(fontSize);
		    TweenMax.set('#thumb', {x:startPos});
	    	Draggable.create('#thumb', {type:'x', bounds:'#slider', onDrag:function() {
		    	console.log('x', this.x, this.minX, this.maxX);
				resizeText(this.x, this.minX, this.maxX);
	    	}});
			function initialPosition(fontSize) {
		    	var slider = document.getElementById('slider');
		    	console.log('local left', slider.offsetLeft);
				var bounds = slider.getBoundingClientRect();
				var minX = bounds.left;
				var maxX = bounds.right;
				console.log('found bounds', minX, maxX);
				var x = (fontSize - ptMin) / ptRange * (maxX - minX) + minX;
				resizeText(x, minX, maxX);
				return(x);
	    	}
			function resizeText(x, min, max) {
		    	var size = (x - min) / (max - min) * ptRange + ptMin;
				sampleNode.style.fontSize = size + 'px';		    
	    	}
	    }
	</script>
	<style>
		body {
		    margin:0;
	    }
	    #settingRoot {
		    background-color: #abc;
		    padding-left:3%;
		    padding-right:3%;
		    padding-top:30px;
		    padding-bottom:20px;
		    margin:0;
	    }
		#fontSizeControl {
			margin:0;
			padding:30px;
		}
		#slider {
			margin-left:auto;
			margin-right:auto;
			margin-bottom:0px;
			border-radius: 7px;
			background-color:#00008B;
			width:70%;
			height:7px;
		}
		#thumb {
			height: 30px;
			width: 30px;
			margin-top: -30px;
			background: #eee;
			padding: 6px;
			border: solid 4px #bcbbbb;
			outline: none;
			border-radius: 2em;
			box-shadow: inset 0 1px 2px rgba(0,0,0,.2);
			box-shadow: 4px 4px 5px #777;
		}
		#sampleText {
		}
	</style>
</html>