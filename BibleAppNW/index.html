<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <meta charset="utf-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="msapplication-tap-highlight" content="no" />
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
	<link rel="stylesheet" href="css/BibleApp.css"/>
	<script type="text/javascript" src="js/BibleApp.js"></script>
	<script type="text/javascript" src="js/hammer.min.js"></script>
	<script type="text/javascript" src="js/fastclick.js"></script>
	<script type="text/javascript" src="licensed/greensock/TweenMax.js"></script>
	<script type="text/javascript" src="licensed/greensock/Draggable.js"></script>
	<script type="text/javascript" src="licensed/greensock/ThrowPropsPlugin.js"></script>
    <script type="text/javascript" src="licensed/greensock/TimelineLite.js"></script>
	<script type="text/javascript">
		function onBodyLoad() {
			console.log('DEVICE IS READY **');
			FastClick.attach(document.body);
			var settingStorage = new SettingStorage();
			
			document.body.addEventListener(BIBLE.CHG_VERSION, function(event) {
				console.log('CHANGE VERSION', event.detail.version);
				settingStorage.setCurrentVersion(event.detail.version);
				changeVersionHandler(event.detail.version);
			});
						
			settingStorage.getCurrentVersion(function(version) {
				if (version == null) {
					version = 'WEB.db1'; // Where does the defalt come from.  There should be one for each major language.
					settingStorage.setCurrentVersion(version);
				}
				changeVersionHandler(version);
			});
			
			function changeVersionHandler(version) {
				app = new AppViewController(version, settingStorage);
				app.begin();
				//app.begin('TableContentsView');
				//app.begin('SearchView');
				//app.begin('QuestionsView')
				//app.begin('HistoryView');
				//app.begin('VersionsView');
				//app.begin('SettingsView');
			}
		};
	</script>
  </head>
  <body onload="onBodyLoad()">
    <table id="statusRoot">
	    <tr id="statusRow">
	        <td id="tocCell"></td>
	        <td id="searchCell"></td>
	        <td id="labelCell"></td>
	        <td id="questionsCell"></td>
	        <td id="settingsCell"></td>
	    </tr>
    </table>
    <div id="codexRoot"></div>
    <div id="searchRoot"></div>
    <div id="historyRoot"></div>
    <div id="questionsRoot"></div>
    <div id="tocRoot"></div>
    <div id="settingRoot"></div>
  </body>
</html>